# https://aur.archlinux.org/packages/arronax
groups=('modified')

pkgname=arronax
pkgver=0.8.1
pkgrel=2
pkgdesc="A GTK based GUI program to create and modify starters (*.desktop files) for applications, files, and URIs."
arch=('any')
license=('GPL3')
url="http://www.florian-diesch.de/software/arronax"
depends=('libwnck3' 'python-gobject' 'python-pyxdg')
makedepends=('python-build' 'python-installer' 'python-setuptools' 'python-wheel')
optdepends=('nemo-python: for Nemo extension'
            'python-caja: for Caja extension'
#            'python-nautilus: for Nautilus extension'
            'thunarx-python: for Thunar plugin')
source=("https://www.florian-diesch.de/software/arronax/dist/$pkgname-$pkgver.tar.gz")
sha256sums=('cb50187a3d92093665f8108430e2f2f5615f7577ceb849e00c1b98ecae0e9fe4')

prepare() {
  cd "$pkgname-$pkgver"

  # Fix icon location
  sed -i 's|hicolor/{s}x{s}|hicolor/{s}x{s}/apps|g' setup.py
}

build() {
  cd "$pkgname-$pkgver"
  python -m build --wheel --no-isolation
}

package() {
  cd "$pkgname-$pkgver"
  python -m installer --destdir="$pkgdir" dist/*.whl

  # Not compatibile with Nautilus 43
  rm -rf "$pkgdir/usr/share/nautilus-python/extensions/"
}
