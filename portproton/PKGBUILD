pkgname=portproton
_port_ver=97
_scripts_ver=2077
pkgver=${_port_ver}.${_scripts_ver}
pkgrel=1
pkgdesc="Software for playing Microsoft Windows games and launchers"
arch=('x86_64')
url="https://portwine-linux.ru/port-proton-linux/"
license=('MIT')
depends=('bash' 'bc' 'bubblewrap' 'cabextract' 'curl' 'dbus' 'desktop-file-utils'
         'freetype2' 'gdk-pixbuf2' 'icoutils' 'inxi' 'lib32-alsa-plugins' 
         'lib32-gcc-libs' 'lib32-libgl' 'lib32-libgpg-error' 'lib32-libx11'
         'lib32-libxss' 'lib32-nss' 'lib32-openssl' 'lib32-vulkan-driver'
         'lib32-vulkan-icd-loader' 'lsb-release' 'lsof' 'nss' 'openssl' 'procps-ng'
         'tar' 'ttf-font' 'vulkan-driver' 'vulkan-icd-loader' 'wget' 'xorg-xrandr'
         'yad' 'zenity' 'zstd')
optdepends=('gamemode: Support for Feral GameMode'
            'lib32-gamemode: 32-bit support for Feral GameMode')
_commit=1c80e991469de273025a99240129050855a19b9e
source=("https://raw.githubusercontent.com/Castro-Fidel/PortWINE/$_commit/portwine_install_script/PortProton-$_port_ver"
        "$pkgname.desktop"
        "$pkgname.png"
        'LICENSE')
sha256sums=('b27e1c0dc5c5b77a5a1eb55692bb922adeb79fb559713f7d508014d0b770edb2'
            '93da621c95030b0f4bb2e71c06f29df615f9fc9bb24e52d9b90d82578942856f'
            'b27e5a701555b3cccdba0d902c80888d6b0e6a9ed2fb4ced8dfd915207683975'
            '70c0832c10f5fb81335d0b2ce0d29779db98e15801c295d247e3369eddc85328')

package() {
  install -Dm755 "PortProton-$_port_ver" "$pkgdir/usr/bin/$pkgname"
  install -Dm644 "$pkgname.desktop" -t "$pkgdir/usr/share/applications/"
  install -Dm644 "$pkgname.png" -t "$pkgdir/usr/share/pixmaps"
  install -Dm644 LICENSE -t "$pkgdir/usr/share/licenses/$pkgname/"
}
