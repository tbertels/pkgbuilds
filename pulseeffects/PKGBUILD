# https://archlinux.org/packages/community/x86_64/pulseeffects
# https://github.com/wwmm/pulseeffects/blob/master/PKGBUILD
pkgname=pulseeffects
pkgver=5.0.2
pkgrel=1
pkgdesc='Audio Effects for Pulseaudio Applications'
arch=('x86_64')
url='https://github.com/wwmm/pulseeffects'
license=('GPL3')
depends=('boost-libs' 'glibmm' 'gst-plugin-gtk' 'gst-plugin-pipewire'
         'gst-plugins-bad' 'gst-plugins-base' 'gstreamer' 'gtk3' 'gtkmm3'
         'libebur128' 'libsamplerate' 'libsigc++' 'libsndfile' 'lilv' 'pipewire'
         'pipewire-pulse' 'zita-convolver')
makedepends=('appstream-glib' 'boost' 'calf' 'itstool' 'meson' 'rnnoise'
             'rubberband' 'zam-plugins')
optdepends=('calf: limiter, compressor exciter, bass enhancer and others'
            'lsp-plugins: equalizer, delay'
            'rnnoise: noise remover'
            'rubberband: pitch shifting'
            'yelp: in-app help'
            'zam-plugins: maximizer')
source=("$pkgname-$pkgver.tar.gz::$url/archive/v$pkgver.tar.gz")
sha256sums=('a6baea9e25c1ed39b3b91eabe0210312cfe0044179c5e01584f4801dc487a7b2')

build() {
	arch-meson $pkgname-$pkgver build
	meson compile -C build
}

check() {
	meson test -C build --print-errorlogs
}

package() {
	DESTDIR="$pkgdir" meson install -C build
}
