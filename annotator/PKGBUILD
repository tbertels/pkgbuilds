# https://aur.archlinux.org/packages/annotator
groups=('modified')

pkgname=annotator
_app_id=com.github.phase1geo.annotator
pkgver=1.2.1
pkgrel=1
pkgdesc="Image annotation for Elementary OS"
arch=('x86_64')
url="https://github.com/phase1geo/Annotator"
license=('GPL3')
depends=('granite' 'libhandy' 'python-gobject')
makedepends=('meson' 'vala')
checkdepends=('appstream')
source=("$pkgname-$pkgver.tar.gz::$url/archive/refs/tags/$pkgver.tar.gz")
sha256sums=('b8c7db122454f4f933a7ed2f82a0dd4f01d931d7d8005acb76de4c98ccdf3153')

build() {
  arch-meson "Annotator-$pkgver" build
  meson compile -C build
}

check() {
  desktop-file-validate "build/data/${_app_id}.desktop"
  appstreamcli validate "build/data/${_app_id}.appdata.xml" || :
}

package() {
  meson install -C build --destdir "$pkgdir"

  ln -s "/usr/bin/${_app_id}" "$pkgdir/usr/bin/$pkgname"
}
